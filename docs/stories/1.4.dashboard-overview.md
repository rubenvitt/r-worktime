# Story 1.4: Dashboard Overview

## Status
Draft

## Story
**As a** user,  
**I want** to see my current overtime balance prominently on a dashboard,  
**so that** I can quickly understand my current work hour situation at a glance

## Acceptance Criteria

1. Dashboard displays current total overtime/undertime balance as primary metric
2. Balance is color-coded (green for positive, red for negative, neutral for zero)
3. Last data update timestamp is clearly visible
4. Dashboard is responsive and works on mobile and desktop devices
5. Current week and month statistics are shown as secondary metrics
6. Loading state is shown while data is being fetched
7. Error state is handled gracefully with retry option
8. Dashboard refreshes automatically when new data is imported

## Tasks / Subtasks

- [ ] Create dashboard layout component (AC: 1, 4)
  - [ ] Design responsive grid layout
  - [ ] Implement primary balance card component
  - [ ] Add secondary metrics cards
  
- [ ] Implement balance display with formatting (AC: 1, 2)
  - [ ] Format hours to readable format (e.g., "+12.5h" or "-3.25h")
  - [ ] Apply color coding based on value
  - [ ] Add animation for value changes
  
- [ ] Add color coding system (AC: 2)
  - [ ] Define color palette (green/red/neutral)
  - [ ] Implement conditional styling
  - [ ] Ensure accessibility (not just color)
  
- [ ] Display update information (AC: 3)
  - [ ] Show last sync timestamp
  - [ ] Add relative time display (e.g., "2 hours ago")
  - [ ] Implement refresh button
  
- [ ] Build responsive design (AC: 4)
  - [ ] Create mobile-first layout
  - [ ] Test on various screen sizes
  - [ ] Optimize touch targets for mobile
  
- [ ] Add secondary metrics (AC: 5)
  - [ ] Calculate and display current week balance
  - [ ] Calculate and display current month balance
  - [ ] Show trend indicators (up/down arrows)
  
- [ ] Implement loading states (AC: 6)
  - [ ] Create skeleton loader components
  - [ ] Add loading spinner for data fetch
  - [ ] Implement progressive data loading
  
- [ ] Handle error states (AC: 7)
  - [ ] Design error message component
  - [ ] Add retry mechanism
  - [ ] Implement fallback UI
  
- [ ] Set up auto-refresh (AC: 8)
  - [ ] Listen for data import events
  - [ ] Implement WebSocket or polling
  - [ ] Add manual refresh capability

## Dev Notes

### Technology Stack (from Architecture)
- **Frontend**: React 18 with TypeScript
- **UI Framework**: Material-UI (MUI) v5
- **State Management**: Zustand
- **Data Fetching**: TanStack Query (React Query)
- **Charts**: Recharts for future visualizations

### Component Structure
```
/src/components/dashboard/
├── DashboardContainer.tsx
├── BalanceCard.tsx
├── MetricCard.tsx
├── UpdateStatus.tsx
└── DashboardSkeleton.tsx
```

### API Endpoints
- `GET /api/dashboard/summary` - Main dashboard data
```json
{
  "totalBalance": 12.5,
  "currentWeekBalance": 2.25,
  "currentMonthBalance": 8.0,
  "lastUpdated": "2025-09-11T10:00:00Z",
  "trend": "increasing"
}
```

### Styling Guidelines
- Primary metric font size: 48px (desktop), 36px (mobile)
- Color codes:
  - Positive: #4CAF50 (green)
  - Negative: #F44336 (red)  
  - Neutral: #9E9E9E (gray)
- Card elevation: 2dp
- Border radius: 8px

### State Management
```typescript
interface DashboardState {
  summary: DashboardSummary | null;
  isLoading: boolean;
  error: Error | null;
  lastFetch: Date | null;
  refresh: () => void;
}
```

### Responsive Breakpoints
- Mobile: < 768px
- Tablet: 768px - 1024px
- Desktop: > 1024px

### Testing
- **Test Location**: `/src/__tests__/components/dashboard/`
- **Framework**: Jest + React Testing Library
- **Test Cases Required**:
  - Balance display formatting
  - Color coding logic
  - Responsive layout
  - Loading states
  - Error handling
  - Auto-refresh trigger
  - Accessibility (ARIA labels)

### Performance Considerations
- Implement React.memo for static components
- Use virtual scrolling for future data lists
- Lazy load chart components
- Cache dashboard data for 5 minutes

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-11 | 1.0 | Initial story creation | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
_To be filled by development agent_

### Debug Log References
_To be filled during development_

### Completion Notes List
_To be filled during development_

### File List
_To be filled during development_

## QA Results
_To be filled by QA agent_