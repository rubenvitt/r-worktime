# Story 1.0: Project Setup & Infrastructure

## Status
Draft

## Story
**As a** development team,  
**I want** a properly configured project foundation with all necessary dependencies and infrastructure,  
**so that** we can start implementing features on a solid, well-structured base

## Acceptance Criteria

1. Full-stack project structure is created with frontend (React) and backend (Node.js) separation
2. All required dependencies from tech stack are installed and configured
3. Database (PostgreSQL) is set up with initial schema and migrations
4. Development environment runs locally with hot-reloading
5. Environment variables are properly configured (.env files)
6. Basic CI/CD pipeline configuration exists
7. Code quality tools (ESLint, Prettier, TypeScript) are configured
8. Git repository is initialized with proper .gitignore
9. Docker configuration for consistent development environment (optional but recommended)
10. README with setup instructions is created

## Tasks / Subtasks

- [ ] Initialize project structure (AC: 1, 8)
  - [ ] Create monorepo or separate frontend/backend folders
  - [ ] Initialize git repository with .gitignore
  - [ ] Set up folder structure according to architecture
  
- [ ] Setup backend infrastructure (AC: 2, 4)
  - [ ] Initialize Node.js project with TypeScript
  - [ ] Install Express and core dependencies
  - [ ] Configure TypeScript (tsconfig.json)
  - [ ] Set up nodemon for development
  - [ ] Create basic Express server with health endpoint
  
- [ ] Setup frontend infrastructure (AC: 2, 4)
  - [ ] Create React app with TypeScript (Vite recommended)
  - [ ] Install Material-UI and dependencies
  - [ ] Configure TypeScript for frontend
  - [ ] Set up development proxy for API
  - [ ] Create basic App structure
  
- [ ] Configure database (AC: 3)
  - [ ] Install PostgreSQL locally or via Docker
  - [ ] Set up Prisma ORM
  - [ ] Create initial schema (users, time_entries tables)
  - [ ] Configure database migrations
  - [ ] Create seed data script
  
- [ ] Set up environment configuration (AC: 5)
  - [ ] Create .env.example template
  - [ ] Configure development .env file
  - [ ] Set up environment variable validation
  - [ ] Document all required variables
  
- [ ] Configure code quality tools (AC: 7)
  - [ ] Set up ESLint for TypeScript
  - [ ] Configure Prettier
  - [ ] Add pre-commit hooks (Husky)
  - [ ] Configure Jest for testing
  - [ ] Set up test structure
  
- [ ] Create CI/CD foundation (AC: 6)
  - [ ] Add GitHub Actions workflow for tests
  - [ ] Configure build verification
  - [ ] Add linting checks to CI
  
- [ ] Docker setup (AC: 9) - Optional
  - [ ] Create Dockerfile for backend
  - [ ] Create Dockerfile for frontend  
  - [ ] Set up docker-compose for full stack
  - [ ] Include PostgreSQL in docker-compose
  
- [ ] Documentation (AC: 10)
  - [ ] Create comprehensive README
  - [ ] Document setup steps
  - [ ] Add architecture overview
  - [ ] Include troubleshooting section

## Dev Notes

### Technology Stack (from Architecture)
**Backend:**
- Node.js 18+ with TypeScript 5+
- Express.js 4.18+
- Prisma ORM 5+
- PostgreSQL 14+
- bcrypt, jsonwebtoken, cors, helmet
- Jest for testing

**Frontend:**
- React 18+ with TypeScript
- Vite as build tool
- Material-UI (MUI) v5
- Zustand for state management
- TanStack Query (React Query)
- Axios for HTTP
- react-dropzone for file uploads

### Project Structure
```
r-worktime/
├── backend/
│   ├── src/
│   │   ├── controllers/
│   │   ├── services/
│   │   ├── middleware/
│   │   ├── routes/
│   │   ├── utils/
│   │   ├── types/
│   │   └── server.ts
│   ├── prisma/
│   │   ├── schema.prisma
│   │   └── migrations/
│   ├── tests/
│   ├── .env
│   ├── .env.example
│   ├── tsconfig.json
│   └── package.json
├── frontend/
│   ├── src/
│   │   ├── components/
│   │   ├── pages/
│   │   ├── services/
│   │   ├── store/
│   │   ├── hooks/
│   │   ├── utils/
│   │   ├── types/
│   │   └── App.tsx
│   ├── public/
│   ├── .env
│   ├── .env.example
│   ├── tsconfig.json
│   ├── vite.config.ts
│   └── package.json
├── docker-compose.yml
├── .gitignore
├── README.md
└── docs/
```

### Initial Database Schema
```prisma
model User {
  id           String    @id @default(uuid())
  username     String    @unique
  email        String    @unique
  passwordHash String    @map("password_hash")
  createdAt    DateTime  @default(now()) @map("created_at")
  updatedAt    DateTime  @updatedAt @map("updated_at")
  
  timeEntries  TimeEntry[]
  
  @@map("users")
}

model TimeEntry {
  id            String   @id @default(uuid())
  userId        String   @map("user_id")
  date          DateTime @db.Date
  startTime     DateTime @db.Time
  endTime       DateTime @db.Time
  durationHours Decimal  @db.Decimal(4, 2) @map("duration_hours")
  project       String?
  task          String?
  rawData       Json?    @map("raw_data")
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")
  
  user          User     @relation(fields: [userId], references: [id])
  
  @@unique([userId, date, startTime, endTime])
  @@map("time_entries")
}
```

### Environment Variables
```env
# Backend
NODE_ENV=development
PORT=3001
DATABASE_URL=postgresql://user:password@localhost:5432/worktime_db
JWT_SECRET=your-secret-key-here
BCRYPT_ROUNDS=12

# Frontend (in frontend/.env)
VITE_API_URL=http://localhost:3001
```

### Package.json Scripts
```json
// Backend
"scripts": {
  "dev": "nodemon src/server.ts",
  "build": "tsc",
  "start": "node dist/server.js",
  "test": "jest",
  "lint": "eslint src/**/*.ts",
  "migrate": "prisma migrate dev",
  "seed": "ts-node prisma/seed.ts"
}

// Frontend
"scripts": {
  "dev": "vite",
  "build": "tsc && vite build",
  "preview": "vite preview",
  "test": "jest",
  "lint": "eslint src/**/*.tsx"
}
```

### Testing
- **Test Location**: 
  - Backend: `/backend/tests/`
  - Frontend: `/frontend/src/__tests__/`
- **Test Cases Required**:
  - Backend server starts successfully
  - Database connection works
  - Basic API health check
  - Frontend builds without errors
  - Frontend connects to backend API

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-11 | 1.0 | Initial story creation | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
_To be filled by development agent_

### Debug Log References
_To be filled during development_

### Completion Notes List
_To be filled during development_

### File List
_To be filled during development_

## QA Results
_To be filled by QA agent_