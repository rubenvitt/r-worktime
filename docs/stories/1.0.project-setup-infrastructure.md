# Story 1.0: Project Setup & Infrastructure

## Status
Updated for Next.js 15

## Story
**As a** development team,  
**I want** a properly configured Next.js 15 monorepo with all necessary dependencies and infrastructure,  
**so that** we can start implementing features on a solid, modern full-stack foundation

## Acceptance Criteria

1. Next.js 15 project with App Router and Turbopack is initialized
2. Turborepo monorepo structure with packages (shared, database, ui) is configured
3. PostgreSQL database with Prisma ORM is set up and configured
4. shadcn/ui component library with Tailwind CSS is installed
5. NextAuth.js v5 for authentication is configured
6. Development environment runs with hot-reloading via pnpm dev
7. Environment variables are properly configured (.env.local)
8. Code quality tools (ESLint, Prettier, TypeScript 5.3+) are configured
9. Git hooks with Husky and lint-staged are set up
10. Docker configuration for PostgreSQL database
11. README with comprehensive setup instructions

## Tasks / Subtasks

- [ ] Initialize Next.js 15 monorepo (AC: 1, 2)
  - [ ] Run `pnpm create next-app@latest r-worktime --typescript --tailwind --app --turbopack`
  - [ ] Set up Turborepo with turbo.json configuration
  - [ ] Create monorepo structure: apps/web, packages/(shared, database, ui)
  - [ ] Configure pnpm-workspace.yaml
  - [ ] Move Next.js files to apps/web directory
  
- [ ] Configure UI and styling (AC: 4)
  - [ ] Initialize shadcn/ui with `pnpm dlx shadcn-ui@latest init`
  - [ ] Install Radix UI primitives and utilities
  - [ ] Configure Tailwind CSS with custom theme
  - [ ] Set up packages/ui for shared components
  - [ ] Install Lucide React for icons
  
- [ ] Setup database infrastructure (AC: 3, 10)
  - [ ] Create docker-compose.yml with PostgreSQL 17
  - [ ] Install Prisma: `pnpm add -D prisma && pnpm add @prisma/client`
  - [ ] Initialize Prisma in packages/database
  - [ ] Create complete schema from architecture.md
  - [ ] Run initial migration
  - [ ] Create Prisma client singleton
  
- [ ] Configure authentication (AC: 5)
  - [ ] Install NextAuth.js v5: `pnpm add next-auth@beta @auth/prisma-adapter`
  - [ ] Create auth configuration in app/lib/auth.ts
  - [ ] Set up Prisma adapter
  - [ ] Configure Credentials provider
  - [ ] Create middleware.ts for route protection
  
- [ ] Setup development tools (AC: 6, 7, 8, 9)
  - [ ] Configure ESLint with Next.js rules
  - [ ] Set up Prettier with Tailwind plugin
  - [ ] Initialize Husky with pre-commit hooks
  - [ ] Configure lint-staged
  - [ ] Create VS Code workspace settings
  - [ ] Set up environment variables structure
  
- [ ] Documentation and testing (AC: 11)
  - [ ] Create comprehensive README.md
  - [ ] Document environment setup
  - [ ] Add development workflow guide
  - [ ] Test complete setup process
  - [ ] Verify all hot-reloading works

## Technical Implementation Notes

### Project Structure
```
r-worktime/
├── apps/
│   └── web/                 # Next.js 15 application
├── packages/
│   ├── shared/              # Shared types, utils, constants
│   ├── database/            # Prisma client and migrations
│   └── ui/                  # Shared UI components
├── turbo.json               # Turborepo configuration
├── pnpm-workspace.yaml      # PNPM workspace config
└── docker-compose.yml       # PostgreSQL setup
```

### Key Dependencies
- Next.js 15.0+
- React 19 RC
- TypeScript 5.3+
- Prisma 5.7+
- NextAuth.js 5.0 (beta)
- TanStack Query 5.0+
- shadcn/ui (latest)
- Tailwind CSS 3.4+

### Environment Variables
```env
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/worktime"
DATABASE_URL_UNPOOLED="postgresql://user:password@localhost:5432/worktime"

# Authentication
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="[generated-secret]"

# Application
NEXT_PUBLIC_APP_URL="http://localhost:3000"
```

## Definition of Ready
- [x] Architecture documentation exists
- [x] Tech stack is finalized (Next.js 15)
- [x] Development team has necessary tools installed

## Definition of Done
- [ ] All acceptance criteria are met
- [ ] Project runs successfully with `pnpm dev`
- [ ] All configurations are tested and working
- [ ] Documentation is complete and accurate
- [ ] Code passes all linting and type checks
- [ ] Team can successfully clone and run the project

## Estimated Effort
**Story Points:** 8
**Time Estimate:** 1-2 days

## Dependencies
None - This is the foundation story

## Risks
- Next.js 15 is relatively new, potential for bugs
- Turbopack might have compatibility issues with some packages
- React 19 RC might have breaking changes

## Related Documentation
- [Tech Stack Documentation](/docs/architecture/tech-stack.md)
- [Coding Standards](/docs/architecture/coding-standards.md)
- [Source Tree Structure](/docs/architecture/source-tree.md)